import "vditor/dist/index.css";
import React, { useState} from "react";
import Vditor from "vditor";

const Index = ({value,onRef,keydown}) => {

    const [vd, setVd] = useState();
    React.useEffect(() => {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',(e)=>{
            let isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
            vditor.setTheme(isDarkMode?'dark':'classic',isDarkMode?'dark':'light');

        });
        const vditor = new Vditor("vditor", {
            after: () => {
                vditor.setValue(value);
                setVd(vditor);
                onRef((value)=>{
                    vditor.setValue(value);
                });
            },
            width:'70vw',
            height:'100vh',
            comment:{
                enable:true
            },
            theme:window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'classic',
            cache:{
                id:'vditor'
            },
            preview:{
                theme:{
                    current:window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light',
                },
            },
            hint: {
              emoji: {
                  "+1":                                   "ğŸ‘",
                  "-1":                                   "ğŸ‘",
                  "100":                                  "ğŸ’¯",
                  "1234":                                 "ğŸ”¢",
                  "1st_place_medal":                      "ğŸ¥‡",
                  "2nd_place_medal":                      "ğŸ¥ˆ",
                  "3rd_place_medal":                      "ğŸ¥‰",
                  "8ball":                                "ğŸ±",
                  "a":                                    "ğŸ…°ï¸",
                  "ab":                                   "ğŸ†",
                  "abc":                                  "ğŸ”¤",
                  "abcd":                                 "ğŸ”¡",
                  "Accept":                               "ğŸ‰‘",
                  "aerial_tramway":                       "ğŸš¡",
                  "afghanistan":                          "ğŸ‡¦ğŸ‡«",
                  "airplane":                             "âœˆï¸",
                  "aland_islands":                        "ğŸ‡¦ğŸ‡½",
                  "alarm_clock":                          "â°",
                  "albania":                              "ğŸ‡¦ğŸ‡±",
                  "alembic":                              "âš—ï¸",
                  "algeria":                              "ğŸ‡©ğŸ‡¿",
                  "alien":                                "ğŸ‘½",
                  "ambulance":                            "ğŸš‘",
                  "american_samoa":                       "ğŸ‡¦ğŸ‡¸",
                  "amphora":                              "ğŸº",
                  "anchor":                               "âš“ï¸",
                  "andorra":                              "ğŸ‡¦ğŸ‡©",
                  "angel":                                "ğŸ‘¼",
                  "anger":                                "ğŸ’¢",
                  "angola":                               "ğŸ‡¦ğŸ‡´",
                  "angry":                                "ğŸ˜ ",
                  "anguilla":                             "ğŸ‡¦ğŸ‡®",
                  "anguished":                            "ğŸ˜§",
                  "ant":                                  "ğŸœ",
                  "antarctica":                           "ğŸ‡¦ğŸ‡¶",
                  "antigua_barbuda":                      "ğŸ‡¦ğŸ‡¬",
                  "apple":                                "ğŸ",
                  "aquarius":                             "â™’ï¸",
                  "argentina":                            "ğŸ‡¦ğŸ‡·",
                  "aries":                                "â™ˆï¸",
                  "armenia":                              "ğŸ‡¦ğŸ‡²",
                  "arrow_backward":                       "â—€ï¸",
                  "arrow_double_down":                    "â¬",
                  "arrow_double_up":                      "â«",
                  "arrow_down":                           "â¬‡ï¸",
                  "arrow_down_small":                     "ğŸ”½",
                  "arrow_forward":                        "â–¶ï¸",
                  "arrow_heading_down":                   "â¤µï¸",
                  "arrow_heading_up":                     "â¤´ï¸",
                  "arrow_left":                           "â¬…ï¸",
                  "arrow_lower_left":                     "â†™ï¸",
                  "arrow_lower_right":                    "â†˜ï¸",
                  "arrow_right":                          "â¡ï¸",
                  "arrow_right_hook":                     "â†ªï¸",
                  "arrow_up":                             "â¬†ï¸",
                  "arrow_up_down":                        "â†•ï¸",
                  "arrow_up_small":                       "ğŸ”¼",
                  "arrow_upper_left":                     "â†–ï¸",
                  "arrow_upper_right":                    "â†—ï¸",
                  "arrows_clockwise":                     "ğŸ”ƒ",
                  "arrows_counterclockwise":              "ğŸ”„",
                  "art":                                  "ğŸ¨",
                  "articulated_lorry":                    "ğŸš›",
                  "artificial_satellite":                 "ğŸ›°",
                  "aruba":                                "ğŸ‡¦ğŸ‡¼",
                  "asterisk":                             "*ï¸âƒ£",
                  "astonished":                           "ğŸ˜²",
                  "athletic_shoe":                        "ğŸ‘Ÿ",
                  "atm":                                  "ğŸ§",
                  "atom_symbol":                          "âš›ï¸",
                  "australia":                            "ğŸ‡¦ğŸ‡º",
                  "austria":                              "ğŸ‡¦ğŸ‡¹",
                  "avocado":                              "ğŸ¥‘",
                  "azerbaijan":                           "ğŸ‡¦ğŸ‡¿",
                  "b":                                    "ğŸ…±ï¸",
                  "baby":                                 "ğŸ‘¶",
                  "baby_bottle":                          "ğŸ¼",
                  "baby_chick":                           "ğŸ¤",
                  "baby_symbol":                          "ğŸš¼",
                  "back":                                 "ğŸ”™",
                  "bacon":                                "ğŸ¥“",
                  "badminton":                            "ğŸ¸",
                  "baggage_claim":                        "ğŸ›„",
                  "baguette_bread":                       "ğŸ¥–",
                  "bahamas":                              "ğŸ‡§ğŸ‡¸",
                  "bahrain":                              "ğŸ‡§ğŸ‡­",
                  "balance_scale":                        "âš–ï¸",
                  "balloon":                              "ğŸˆ",
                  "ballot_box":                           "ğŸ—³",
                  "ballot_box_with_check":                "â˜‘ï¸",
                  "bamboo":                               "ğŸ",
                  "banana":                               "ğŸŒ",
                  "bangbang":                             "â€¼ï¸",
                  "bangladesh":                           "ğŸ‡§ğŸ‡©",
                  "bank":                                 "ğŸ¦",
                  "bar_chart":                            "ğŸ“Š",
                  "barbados":                             "ğŸ‡§ğŸ‡§",
                  "barber":                               "ğŸ’ˆ",
                  "baseball":                             "âš¾ï¸",
                  "basketball":                           "ğŸ€",
                  "basketball_man":                       "â›¹",
                  "basketball_woman":                     "â›¹ï¸â€â™€ï¸",
                  "bat":                                  "ğŸ¦‡",
                  "bath":                                 "ğŸ›€",
                  "bathtub":                              "ğŸ›",
                  "battery":                              "ğŸ”‹",
                  "beach_umbrella":                       "ğŸ–",
                  "bear":                                 "ğŸ»",
                  "bed":                                  "ğŸ›",
                  "bee":                                  "ğŸ",
                  "beer":                                 "ğŸº",
                  "beers":                                "ğŸ»",
                  "beetle":                               "ğŸ",
                  "beginner":                             "ğŸ”°",
                  "belarus":                              "ğŸ‡§ğŸ‡¾",
                  "belgium":                              "ğŸ‡§ğŸ‡ª",
                  "belize":                               "ğŸ‡§ğŸ‡¿",
                  "bell":                                 "ğŸ””",
                  "bellhop_bell":                         "ğŸ›",
                  "benin":                                "ğŸ‡§ğŸ‡¯",
                  "bento":                                "ğŸ±",
                  "bermuda":                              "ğŸ‡§ğŸ‡²",
                  "bhutan":                               "ğŸ‡§ğŸ‡¹",
                  "bicyclist":                            "ğŸš´",
                  "bike":                                 "ğŸš²",
                  "biking_man":                           "ğŸš´",
                  "biking_woman":                         "ğŸš´â€â™€",
                  "bikini":                               "ğŸ‘™",
                  "biohazard":                            "â˜£ï¸",
                  "bird":                                 "ğŸ¦",
                  "birthday":                             "ğŸ‚",
                  "black_circle":                         "âš«ï¸",
                  "black_flag":                           "ğŸ´",
                  "black_heart":                          "ğŸ–¤",
                  "black_joker":                          "ğŸƒ",
                  "black_large_square":                   "â¬›ï¸",
                  "black_medium_small_square":            "â—¾ï¸",
                  "black_medium_square":                  "â—¼ï¸",
                  "black_nib":                            "âœ’ï¸",
                  "black_small_square":                   "â–ªï¸",
                  "black_square_button":                  "ğŸ”²",
                  "blonde_man":                           "ğŸ‘±",
                  "blonde_woman":                         "ğŸ‘±â€â™€",
                  "blossom":                              "ğŸŒ¼",
                  "blowfish":                             "ğŸ¡",
                  "blue_book":                            "ğŸ“˜",
                  "blue_car":                             "ğŸš™",
                  "blue_heart":                           "ğŸ’™",
                  "blush":                                "ğŸ˜Š",
                  "boar":                                 "ğŸ—",
                  "boat":                                 "â›µï¸",
                  "bolivia":                              "ğŸ‡§ğŸ‡´",
                  "bomb":                                 "ğŸ’£",
                  "book":                                 "ğŸ“–",
                  "bookmark":                             "ğŸ”–",
                  "bookmark_tabs":                        "ğŸ“‘",
                  "books":                                "ğŸ“š",
                  "boom":                                 "ğŸ’¥",
                  "boot":                                 "ğŸ‘¢",
                  "bosnia_herzegovina":                   "ğŸ‡§ğŸ‡¦",
                  "botswana":                             "ğŸ‡§ğŸ‡¼",
                  "bouquet":                              "ğŸ’",
                  "bow":                                  "ğŸ™‡",
                  "bow_and_arrow":                        "ğŸ¹",
                  "bowing_man":                           "ğŸ™‡",
                  "bowing_woman":                         "ğŸ™‡â€â™€",
                  "bowling":                              "ğŸ³",
                  "boxing_glove":                         "ğŸ¥Š",
                  "boy":                                  "ğŸ‘¦",
                  "brazil":                               "ğŸ‡§ğŸ‡·",
                  "bread":                                "ğŸ",
                  "bride_with_veil":                      "ğŸ‘°",

              }
            },
            // upload:{
            //     url: '/api/file/vditor',
            //     filename(name) {
            //         return 'file';
            //     },
            //
            // }
        });
    }, []);
    return  <div style={{display:"flex"}}>
        <div id={'vditor'} className="vditor"
             onKeyUp={()=>{keydown(vd.getValue())}}
        />
    </div>;
};
export default Index;
